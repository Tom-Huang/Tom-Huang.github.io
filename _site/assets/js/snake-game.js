class SnakeGame{constructor(t){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.gridSize=20,this.snake=[{x:5,y:5}],this.food=this.generateFood(),this.direction="right",this.score=0,this.gameOver=!1,this.speed=150,document.addEventListener("keydown",this.handleKeyPress.bind(this)),this.gameLoop()}generateFood(){const t=Math.floor(this.canvas.width/this.gridSize),i=Math.floor(this.canvas.height/this.gridSize);let e;do{e={x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*i)}}while(this.snake.some((t=>t.x===e.x&&t.y===e.y)));return e}handleKeyPress(t){const i={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"}[t.key];if(!i)return;({up:"down",down:"up",left:"right",right:"left"})[i]!==this.direction&&(this.direction=i)}update(){if(this.gameOver)return;const t={...this.snake[0]};switch(this.direction){case"up":t.y--;break;case"down":t.y++;break;case"left":t.x--;break;case"right":t.x++}t.x<0||t.x>=this.canvas.width/this.gridSize||t.y<0||t.y>=this.canvas.height/this.gridSize||this.snake.some((i=>i.x===t.x&&i.y===t.y))?this.gameOver=!0:(this.snake.unshift(t),t.x===this.food.x&&t.y===this.food.y?(this.score++,this.food=this.generateFood(),this.speed=Math.max(50,this.speed-5)):this.snake.pop())}draw(){this.ctx.fillStyle="#f0f0f0",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#4CAF50",this.snake.forEach((t=>{this.ctx.fillRect(t.x*this.gridSize,t.y*this.gridSize,this.gridSize-1,this.gridSize-1)})),this.ctx.fillStyle="#FF5722",this.ctx.fillRect(this.food.x*this.gridSize,this.food.y*this.gridSize,this.gridSize-1,this.gridSize-1),this.ctx.fillStyle="#000",this.ctx.font="20px Arial",this.ctx.fillText(`Score: ${this.score}`,10,30),this.gameOver&&(this.ctx.fillStyle="rgba(0, 0, 0, 0.75)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#fff",this.ctx.font="30px Arial",this.ctx.textAlign="center",this.ctx.fillText("Game Over!",this.canvas.width/2,this.canvas.height/2),this.ctx.font="20px Arial",this.ctx.fillText("Press R to restart",this.canvas.width/2,this.canvas.height/2+40))}gameLoop(){this.update(),this.draw(),setTimeout((()=>this.gameLoop()),this.speed)}restart(){this.snake=[{x:5,y:5}],this.direction="right",this.score=0,this.gameOver=!1,this.speed=150,this.food=this.generateFood()}}document.addEventListener("DOMContentLoaded",(()=>{const t=new SnakeGame("snakeCanvas");document.addEventListener("keydown",(i=>{"r"===i.key&&t.gameOver&&t.restart()}))}));